# firmoffer-spider

# 由于 Okex 接口还在逐步修改，限制频率也可能随时间变化

## Okex: 

### 钱包部分： 
    1.获取钱包账户信息
        官方限制：文档未给出

### 币币账户部分： 
    1.获取币币账户信息
        官方限制：20次/2s
    2.获取订单列表
        官方限制：20次/2s

### 合约部分： 
    1.获取合约所有币种合约账户信息
        官方限制：1次/10s
    2.获取订单列表
        官方限制：10次/2s
    3.获取合约持仓信息
        官方限制：10次/2s

## 程序：
### 账户信息部分：
        10秒一次获取全部用户的账户信息（但实际会按照实际执行时间轮询），每个用户分别获取其合约，币币账户，钱包的数据，每次请求之间手动延迟1秒等待。
        例如：目前我们有9个 Okex 用户，则这个地方消耗时间点为:(2*6+1*3)*9=135秒   ((每次请求的平均时间)*3+(间隔时间)*3)*9 （此处暂未考虑入库等时间消耗）
### 订单列表部分：
            5秒一次获取期货，现货订单列表信息（但实际会按照实际执行时间轮询），每个触发需要抓取订单信息（现货期货区分后的信息），根据现货与期货分别获取其不同的订单信息，现货比较好处理一次请求，
        期货需要区分三种合约且每种合约都有两次请求（部分完成，完全完成+已撤单），期货订单列表之间间隔为2次/10s（昨天的文档，今天为10次/2s，程序暂未改）。
        例如:目前9个 Okex 账户中，有三个账户的部分币种触发了订单抓取规则（用户1：BTC 现货，ETH 期货,用户2：EOS 期货，XRP 期货，用户3：BCH 现货），则这里触发的订单获取逻辑是：
            1.用户1：BTC 现货
            2.用户1：ETH 期货
                1）ETH 本周
                    1）部分完成
                    2）完全完成+已撤单
                2）ETH 次周
                    1）部分完成
                    2）完全完成+已撤单
                3）ETH 季度
                    1）部分完成
                    2）完全完成+已撤单
            其他同理……………………
            根据例子来看的话，本次轮询需要消耗的时间为：2*20+5*3=55秒 （每次请求的平均时间）* 20 + （期货列表请求间隔时间）* 3 
 ### 用户持仓部分：
        10秒一次获取全部用户的持仓信息（但实际会按照实际执行时间轮询）,每个用户一次请求即可。
            例如：目前9个 Okex 用户，全部获取一次的时间大概在2*9=18秒 （每次请求平均间隔时间）*9
            
# Binance请求频率限制：
      订单接口限制：10次/s
      请求权重：1200次/1min  （weigh =1 的请求一分钟为1200次）
      所有请求：5000次/5min
  
      程序中请求了下面两个接口：
          1、账户信息接口：GET /api/v3/account (HMAC SHA256) 权重为5  （1s内不能超过2次请求）
          2、交易信息接口：GET /api/v3/myTrades  (HMAC SHA256) 权重为 5/币对   （1s内不能超过2次请求）
